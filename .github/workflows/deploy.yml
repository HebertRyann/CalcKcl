name: CI

on:
  push:
    branches: [ master ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
      
      - name: Setup Node.js environment
        uses: actions/setup-node@v2.1.5
        with:
          node-version: 16.x

      - name: Debug loaded variables (optional)
        run: |
          echo "Host: ${{ secrets.ONE_CLICK_DEPLOY_SSH_HOST }}"
          echo "Port: ${{ secrets.ONE_CLICK_DEPLOY_SSH_PORT }}"
          echo "Target: ${{ secrets.ONE_CLICK_DEPLOY_SSH_TARGET }}"
          echo "User: ${{ secrets.ONE_CLICK_DEPLOY_SSH_USER }}"
          # Nunca exponha a chave privada no log!

      #Copiar c√≥digo para servidor
      - name: copy file via ssh to server
        uses: appleboy/scp-action@master
        with:
          host: "ec2-3-22-242-130.us-east-2.compute.amazonaws.com"
          username: "ec2-user"
          key: "-----BEGIN RSA PRIVATE KEY-----MIIEpAIBAAKCAQEAvPIUtvQFfYAlqfBOsYOB8ZuF+ZwVy0TerMI292PhVfT/pgGTOjmBxQuS0L+QxvKjLKbcPeU+brvTztEhKH42iS89E2JIKYXNSoSIRFDILhO+WdCehWiaKBISykxurbmT6iVVQfwKZTHSsnYFX+/755g1Jh2VnszUUxpXtE/YkSi3lwjumdChdQOrsTaLn3LsGw1KBP9pJia1MZXyEXYjomjqAfZIoFLq4vTgC7EStgMKpWGM0Ywb2QJT4SB759Os2Br2klHSbTS2ktndoy1+TjXYMQyOU3Q8YIb47YQXw3cp3KN5p9wR4SB9vgPZPRJSInJGbC486IQuXjpteU46LwIDAQABAoIBAQCwf+Lh1KmcRqzoRlb8c8BbFdDdDvU84KSx9Oqrxl2kkiyNwkLpzPZwPxNydMClV9sdxvFN0Gu1vTdqpui2jtAa7km7Zb/LKfZPeeZhCqU0hbT26W5raP84F0n+N8/b8NM/kohGD08WoKgVlTIIIIHMId7kMBaoNObSinULNtszHJ5kd8aPu3EWuA/OqCWTlhUhH41reisbSY5Gv3AkdoOhs1CWI39KM08Mxme19IUWjpvBpSlTcDzxPPKioQQtlNGP1EotESbVtLfrmuUkfBe2yyRHlNNERfbrvsnz/vXmxPDFYJ/0cjuzrv7dKKBn+mpfaEISXiFI6IjaXp0dyI4BAoGBAOlh/9oao3AicMdWk9+ARTDo7pX5zhN/j9u6F808SOWERK/qeWy96rfYgQlVxIYbXo4Gl8LGoUc/4FatnO3tmIsvqKCOS5c6IfZKEefumT3yklVx66XYMU2KfGZzK0rGopYK8BMGyr18LrGc/KA98TUyRfgv5/3Zr3FYO/IcLrpBAoGBAM9Bo2L62CbCUbKywEtK+F7aDT8yLx2pLdmu1XHGes2lv4YB7UWsPE28bwlBvYjtlz8VCorDeLysSyMOIai2Xf5DCt+z/ZWCz4UwIY+TWuDjLca+0qY9XjejwQ1FzhANy8OylWNLzaL8Ae2IBAm91XLwQy5tYfr8H4P0/EJofXhvAoGAGcZvAWGLx2imV/2h2z9JZPt0zi+GqPSfqL7Gvi34RxDynRMiUfYvpBpPNf648662JK1puWNCkKHnXutRt51UCZs73m+YvZz3/0Fy9NCPMB5INxOb2PclitDOqGnz0BBcCIIwvYk0fvTmG0uhQvlUWHGy9JQl5Q1TqQr7o+Ok7YECgYEAh5YPR1+HLMQPInKiLh+boKHR7Lft7t+QqUohRM9t4z89rnNwQBZPVSOjGFEzp3KXcaNYRDNgtz2X4hUKnA7CKua9JF/h03/CNwWnzv+9gkXc2ppXwH2BN7EfSImUJxh/Z0VbSZx7qNZohHZo/d581zarHKJeaQ2rqG4K4X7uJm0CgYAbf6nvaMXha+u1U1t6nvQNDOufBklwESEYRFX/nByXwcan8nPHknvkYLaaCNAKv0I7LxXusMlbf1AtMktmfokEF/1tmsZZKuVhfnzgLuo0NngqNjdqUC+8xLWB/E1fYWzkEriaqbOYe7VwPivYvvlTquqPKZFr28cAWQo8gOZb5Q==-----END RSA PRIVATE KEY-----"
          port: 22
          source: ".,!node_modules"
          target: "/usr/share/calc/api"
